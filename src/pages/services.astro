---
// Import necessary components
import MainLayout from "@/layouts/MainLayout.astro";
import MainSection from "@components/ui/blocks/MainSection.astro";
import FeaturesStats from "@components/sections/features/FeaturesStats.astro";
import ServicesGrid from "@components/sections/services/ServicesGrid.vue";
import { SITE } from "@data/constants";
import { getPublicSettings } from '@/API/fetchData';

export const prerender = false;

const pageTitle: string = `Services | ${SITE.title}`;

// Fetch visibility settings from API
let visibility = {
  featuresStats: true
};

try {
  const settings = await getPublicSettings();
  if (settings && settings.landing && settings.landing.servicesPage) {
    visibility = settings.landing.servicesPage;
  }
} catch (error) {
  console.error('Error loading settings:', error);
}
---

<MainLayout
  title={pageTitle}
  structuredData={{
    "@context": "https://schema.org",
    "@type": "WebPage",
    "@id": "https://screwfast.uk/services",
    "url": "https://screwfast.uk/services",
    "name": "Expert Consultation Services | ScrewFast",
    "description": "Uniting expertise with your vision, ScrewFast provides exceptional service and comprehensive solutions in the hardware and construction industry, from consultation to project completion.",
    "isPartOf": {
        "@type": "WebSite",
        "url": "https://screwfast.uk",
        "name": "ScrewFast",
        "description": "ScrewFast offers top-tier hardware tools and expert construction services to meet all your project needs."
    },
    "inLanguage": "en-US"
  }}
>
  <!--MainSection is the introductory section of the page, it also contains a CTA button-->
  <!-- <MainSection
    title="Uniting Expertise with Your Vision"
    subTitle="At ScrewFast, we take pride in providing comprehensive solutions and exceptional service in the hardware and construction industry. Our experienced team is dedicated to supporting your project from inception to completion with a range of specialized services."
    btnExists={true}
    btnTitle="Schedule a Consultation"
    btnURL="#"
  /> -->
  <!-- Services grid with real-time data from API -->
  <ServicesGrid client:load />
  <!--FeaturesStats section showcases essential stats valuable to users-->
  {visibility.featuresStats && (
    <FeaturesStats
      title="By the Numbers"
      subTitle="Our commitment to quality and reliability is evident in every project we undertake. At ScrewFast, we are dedicated to delivering industry-leading services that ensure your construction projects are built to last."
      mainStatTitle="96%"
      mainStatSubTitle="of our clients rate their experience with ScrewFast as exceptional"
      stats={[
        {
          stat: "99.8%",
          description: "project completion rate",
        },
        {
          stat: "5,000+",
          description: "successful installations",
        },
        {
          stat: "85%",
          description: "client growth year-over-year",
        },
      ]}
    />
  )}
</MainLayout>
